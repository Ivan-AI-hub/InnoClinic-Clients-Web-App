
<MudPaper Width=@(collapseNavMenu? "50px" : "250px") Height="100vh" Class="pt-2" Elevation="0">
    @if (!collapseNavMenu)
    {
        <div class="d-flex justify-content-between mud-width-full">

            <MudText Typo="Typo.h6" Class="px-4">Innoclinic </MudText>

            <div style="width:50px">
                <MudNavLink OnClick="ToggleNavMenu" Icon="@Icons.Material.Filled.Menu" />
            </div>
        </div>
    }
    else
    {
        <MudNavLink OnClick="ToggleNavMenu" Icon="@Icons.Material.Filled.Menu" />
    }
    <MudDivider Class="my-2" DividerType="DividerType.FullWidth" />
    <MudNavMenu Class="mud-width-full" Color="Color.Primary">
        <MudNavLink Href="/" Icon="@Icons.Material.Filled.Home">@GetLinkName("Home")</MudNavLink>
        <AuthorizeView Roles="Patient">
            <Authorized>
                <MudNavLink Icon="@Icons.Material.Filled.DocumentScanner" OnClick="OpenCreateAppointmentModal">@GetLinkName("Create appointment")</MudNavLink>
            </Authorized>
        </AuthorizeView>
        <MudNavLink Href="/doctors" Icon="@Icons.Material.Filled.People">@GetLinkName("Doctors")</MudNavLink>
        <AuthorizeView Roles="Admin">
            <Authorized>
                <MudNavLink Href="/services" Icon="@Icons.Material.Filled.MedicalServices">@GetLinkName("Services")</MudNavLink>
                <MudNavLink Href="/receptionists" Icon="@Icons.Material.Filled.People">@GetLinkName("Receptionists")</MudNavLink>
                <MudNavLink Href="/patients" Icon="@Icons.Material.Filled.People">@GetLinkName("Patients")</MudNavLink>
                <MudNavLink Href="/appointments" Icon="@Icons.Material.Filled.List">@GetLinkName("Appointments")</MudNavLink>
                <MudNavLink Href="/offices" Icon="@Icons.Material.Filled.LocalPostOffice">@GetLinkName("Offices")</MudNavLink>
                <MudNavLink Href="/specializations" Icon="@Icons.Material.Filled.List">@GetLinkName("Specializations")</MudNavLink>
            </Authorized>
        </AuthorizeView>
    </MudNavMenu>
</MudPaper>

@code {
    [CascadingParameter] public IModalService Modal { get; set; }
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void OpenCreateAppointmentModal()
    {
        var options = new ModalOptions()
            {
                Size = ModalSize.Large,
                HideCloseButton = false
            };
        Modal.Show<CreateAppointment>("Create appointment", options);
    }

    private void OpenRegisterModal()
    {
        Modal.Show<Register>("Sign up");
    }

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
        StateHasChanged();
    }

    private string GetLinkName(string name)
    {
        if (collapseNavMenu)
        {
            return "";
        }
        return name;
    }
}

<style>
    .menu {
        padding-right: 0px !important;
    }
</style>
