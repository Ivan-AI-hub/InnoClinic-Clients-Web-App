@page "/"
@inject NavigationManager Navigator
@inject AuthenticationStateProvider stateProvider
@attribute [Authorize]

@code {
    protected async override Task OnInitializedAsync()
    {
        var state = await stateProvider.GetAuthenticationStateAsync();
        var role = state.User.FindFirst(ClaimTypes.Role)?.Value ?? throw new Exception("Token auth failed");
        switch (role)
        {
            case "Patient":
                NavigateToPatientHome();
                break;
            case "Admin":
                NavigateToAdminHome();
                break;
            case "Doctor":
                NavigateToDoctorHome();
                break;
        }
    }
    private void NavigateToPatientHome()
    {
        Navigator.NavigateTo("/patients/home");
    }
    private void NavigateToDoctorHome()
    {
        Navigator.NavigateTo("/doctors/home");
    }
    private void NavigateToAdminHome()
    {
        Navigator.NavigateTo("/receptionists/home");
    }
}
